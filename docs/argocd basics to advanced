# ArgoCD Mastery: From GitOps Basics to Advanced Deployments

ArgoCD is a GitOps continuous delivery tool for Kubernetes that enables declarative deployments, progressive delivery, multi-cluster management, and automated rollbacks. It has become a core building block of modern cloud-native workflows. [page:8]

---

## Introduction to GitOps

GitOps is a paradigm where Git acts as the single source of truth for both infrastructure and application configuration. [page:8]

### Core Principles

| Principle            | Description                                      |
|----------------------|--------------------------------------------------|
| Declarative configs  | Store manifests (YAML/Helm/Kustomize) in Git     |
| Automated sync       | Apply Git changes automatically to the cluster   |
| Observability        | Continuously compare cluster state with Git      |
| Rollbacks            | Revert to previous states via Git commits        | [page:8]

### Benefits

- Version-controlled deployments  
- Auditable change history  
- Faster and safer rollbacks [page:8]

---

## ArgoCD Architecture

At a high level, ArgoCD is composed of a control plane plus Kubernetes-native components. [page:8]

| Component         | Description                                      |
|-------------------|--------------------------------------------------|
| API server        | Central management API and web UI                |
| Controller        | Reconciles cluster state with Git state          |
| Repository server | Fetches and serves content from Git repositories |
| Application CRD   | Declarative representation of an application     |
| Dex (optional)    | SSO and identity provider integration            | [page:8]

---

## Installing ArgoCD

Install ArgoCD into a dedicated namespace and expose the API server for initial access. [page:8]

```bash
kubectl create namespace argocd
kubectl apply -n argocd \
  -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml

kubectl port-forward svc/argocd-server -n argocd 8080:443
``` [page:8]

### Logging in

```bash
kubectl -n argocd get secret argocd-initial-admin-secret \
  -o jsonpath="{.data.password}" | base64 -d

argocd login localhost:8080 \
  --username admin \
  --password <password>
``` [page:8]

---

## Creating Applications

In ArgoCD, an Application maps a Git repository path to a destination cluster and namespace. [page:8]

### CLI Example

```bash
argocd app create web-app \
  --repo https://github.com/myorg/web-app.git \
  --path manifests \
  --dest-server https://kubernetes.default.svc \
  --dest-namespace dev \
  --sync-policy automated
``` [page:8]

### Application CRD Example

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: web-app
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/myorg/web-app.git
    path: manifests
    targetRevision: HEAD
  destination:
    server: https://kubernetes.default.svc
    namespace: dev
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
``` [page:8]

---

## App of Apps Pattern

The App of Apps pattern uses a parent Application to manage a hierarchy of child Applications, which is especially useful in microservice-heavy environments. [page:8]

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: parent-app
  namespace: argocd
spec:
  source:
    repoURL: https://github.com/myorg/apps.git
    path: parent
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd
``` [page:8]

---

## Helm and Kustomize Integration

ArgoCD can consume Helm charts or Kustomize overlays directly from Git as sources. [page:8]

### Helm

```yaml
spec:
  source:
    repoURL: https://github.com/myorg/helm-charts.git
    chart: web-app
    targetRevision: 1.0.0
``` [page:8]

### Kustomize

```yaml
spec:
  source:
    repoURL: https://github.com/myorg/kustomize-app.git
    path: overlays/dev
``` [page:8]

---

## ApplicationSets

ApplicationSets let you generate multiple ArgoCD Applications from a single template, often for multi-cluster or multi-env setups. [page:8]

```yaml
apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: web-app-set
spec:
  generators:
    - list:
        elements:
          - cluster: cluster1
            namespace: dev
          - cluster: cluster2
            namespace: prod
  template:
    metadata:
      name: '{{cluster}}-web-app'
    spec:
      project: default
      source:
        repoURL: https://github.com/myorg/web-app
